---
title: "Альфа-каналы в PNG-8"
date: "2008-11-07"
categories: 
  - "xhtmlcss"
  - "design"
  - "useful"
---

Мало кто знает, но они действительно существуют.

Проблема полупрозрачных картинок медленно умирает вместе с IE5-6, но, тем не менее будет актуальна для популярных сайтов еще несколько лет. Вдобавок, дальше станет понятно, почему процентная прозрачность для PNG-8 будет важна и без ИЕ.

### Чем они вообще отличаются, эти PNG?

**PNG-24**:

доступны все возможные цвета, доступна любая степень их прозрачности.

**PNG-8 обычный**:

доступны 256 цветов, прозрачность только на уровне 0 или 100%. Прозрачность в 50%, например, невозможна.

**PNG-8 с альфа-каналами**:

_доступны 256 цветов_, каждый из этих 256 цветов имеет свой показатель прозрачности от 0 до 100%. Возможна прозрачность в 42%.

Казалось бы, «Ну и что? Все равно альфа-каналы в ИЕ работать не будут, толку?».

Однако, толк в том, что полупрозрачные пикселы в PNG-8 при просмотре в ИЕ будут показаны _полностью прозрачными_. Все остальные броузеры честно отобразят их полупрозрачными. Более того, не будет никакого уродливого серо-белого фона, который видно при просмотре PNG-24 картинок в Интернет Эксплорере.

То есть: все пикселы с прозрачностью от 0 до 99% будут отображены IE как _полностью_ прозрачные.

### Как сохранить PNG-8 с альфа-каналами?

Это странно и дико, но сделать это в Photoshop нельзя. (возможно в CS4...?)

Зато такую картинку можно сохранить в [Fireworks](http://www.adobe.com/products/fireworks/)! Там это делается очень просто, при экспорте выбираем опции:

![Опции для экспорта PNG в Fireworks](http://cssing.org.ua/pic/png8alpha/fw.png)Трудно ошибиться, нужно выбрать формат PNG-8 и тип прозрачности «Alpha Transparency». Видно также, что в палитре все цвета имеют прозрачность кроме одного (крайнего справа)

Почему этого нет в Photoshop, загадка.

Также существуют [утилиты](http://pngnq.sourceforge.net/index.html), превращающие PNG-24 в PNG-8. Естественно, при этом качество страдает, но часто с этим можно жить.

### Живой пример

Для примера, я сохранил одну и ту же картинку в трех форматах: PNG-24, PNG-8 обычный, и PNG-8 с альфа-каналами (из Fireworks). Все три поместил на узорчатый фон. Вот что вышло:

![PNG картинки в Firefox](http://cssing.org.ua/pic/png8alpha/ff.jpg)PNG картинки в Firefox

Ничего особо интересного, кроме размеров картинок. Обратите внимание на вес PNG-24 и PNG-8 файлов, при почти идентичном отображении.

А теперь, в ИЕ:

![PNG картинки в IE](http://cssing.org.ua/pic/png8alpha/ie.jpg)PNG картинки в IE. Хорошо видно «серо-белое уродство» упомянутое ранее

Вуаля! То, что называется «graceful degradation»! [Сами смотрите](http://cssing.org.ua/examples/png8alpha/), если не верите. ;) За фон [благодарен](http://www.squidfingers.com/).

### Польза

Вряд ли это знание поможет вам познакомиться с девушкой вашей мечты, или начать наконец делать зарядку по утрам. Но, некоторая польза все же есть. Во-первых, это экономит трафик. Во-вторых, в большинстве случаев отлично деградирует в ИЕ. То есть, можно применять для всяких некритичных украшательских штучек. В IE будет отображен обычный PNG-8 (а ля GIF), а для всех остальных полупрозрачная красота.

Разумеется, в некоторых случаях картинки будут казаться выщербленными в IE (резкие края), но никто и не говорит, что этот способ панацея.

### Еще по теме

Эта техника, кстати, в некоторых случаях могла бы чуть-чуть упростить вот этот [супер-универсальный трюк Виталия](http://harisov.livejournal.com/58661.html). Другие заметки по теме:

- [Библиотека превращающая PNG-24 картинку в PNG-8 с альфа-каналами](http://pngnq.sourceforge.net/index.html). ([и версия c интерфейсом для Mac OS](http://ethan.tira-thompson.com/Mac%20OS%20X%20Ports.html))
- [HOWTO: cross-browser alpha PNGs](http://www.hackszine.com/blog/archive/2008/02/howto_crossbrowser_alpha_pngs.html)
- [PNG8 alpha transparency from Fireworks](http://www.personal.psu.edu/drs18/blogs/davidstong/2007/09/png8_alpha_transparency_from_f.html)
- [Статья на Sitepoint](http://www.sitepoint.com/blogs/2007/09/18/png8-the-clear-winner/)
- [Пример трёх типов PNG из заметки](http://cssing.org.ua/examples/png8alpha/)

Уверен, кто-то уже это использовал. Знание это совсем не новое, но малоизвестное почему-то. Потому, был бы рад если бы вы поделились опытом по теме.
