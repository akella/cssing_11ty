---
title: "Меню на z-index"
date: "2006-11-16"
humanDate: "16 Nov, 2006"
permalink: "2006/11/16/menu-z-index/"
tags: 
  - "xhtmlcss"
  - "design"
comments: 
  -  author: "Flack"
     id: "6569"
     url: "http://flack.ru"
     date: "2006-11-16 20:20:12"
     humandate: "16 Nov, 2006"
     content: | 
       Все-таки для русскоязычного сайта навигация, не работающая с отключенными картинками — хреново.

     email: "alex@flack.ru"

  -  author: "akella"
     id: "6570"
     url: "http://cssing.org.ua"
     date: "2006-11-16 23:33:42"
     humandate: "16 Nov, 2006"
     content: | 
       Да, ты прав, но это прямого отношения к идее не имеет - потому я старался все как можно сильнее упростить. Надо все же делать спаны там еще и испоьзовать что то подобрее к народу с отключенными картинками - к которому я сам сейчас принадлежу

     email: "akella.a@gmail.com"

  -  author: "CB"
     id: "6572"
     url: "http://svoloshyn.org.ua/"
     date: "2006-11-17 11:37:42"
     humandate: "17 Nov, 2006"
     content: | 
       Как-то странно расставлены табиндексы в примере.

     email: "svoloshyn@gmail.com"

  -  author: "akella"
     id: "6573"
     url: "http://cssing.org.ua"
     date: "2006-11-17 17:50:05"
     humandate: "17 Nov, 2006"
     content: | 
       там обратный отсчет idшников - что бы по дефолту задать более логичное перекрытие - то есть - те что левее будут перекрывать тех что правее в навигации.

     email: "akella.a@gmail.com"

  -  author: "Пешков Артём"
     id: "6604"
     url: "http://gorky.tlt.ru/"
     date: "2006-12-04 21:37:15"
     humandate: "04 Dec, 2006"
     content: | 
       Интересно! :) Уже нашел применение. Хотя доработать идею конечно можно :)

     email: "gorky-art@mail.ru"

  -  author: "MrooT"
     id: "6637"
     url: "http://www.na5.net.ru"
     date: "2006-12-14 01:34:50"
     humandate: "14 Dec, 2006"
     content: | 
       Спасибо за статью... CSS рулит

     email: "cj29999@cola.ru"

  -  author: "ZDN"
     id: "6876"
     url: "http://www.pfpl.ru"
     date: "2006-12-26 02:53:15"
     humandate: "26 Dec, 2006"
     content: | 
       Спасибо за интересный материал

     email: "zdn_spb@mail.ru"

  -  author: "Заработок в Интернет"
     id: "9998"
     url: "http://www.my-wmz.info/"
     date: "2007-03-23 17:01:38"
     humandate: "23 Mar, 2007"
     content: | 
       Да-м век живи, век учись. Действительно классная статья, которую я в своё время искал. Правда потом перешёл на другое..
       Респект.

     email: "ostrov999@gala.net"

  -  author: "Ребёнок"
     id: "10964"
     url: "http://ladushki.info"
     date: "2007-05-31 13:56:51"
     humandate: "31 May, 2007"
     content: | 
       Долго искал что-нибудь похожее, а сейчас, когда уже сделал другой вид навигации, нашёл. Респект автору.

     email: "rebenok@mail.ru"

  -  author: "promo"
     id: "11154"
     url: "http://www.promoworld.ru"
     date: "2007-08-31 02:33:32"
     humandate: "31 Aug, 2007"
     content: | 
       Спасибо за статью - помогла разобраться в некоторых моментах.
       Добавил в закладки.

     email: "admin@promoworld.ru"

layout: "layouts/post.njk"
excerpt: "Больше чем два года назад(ужас) <a href=\"http://cssing.org.ua/2004/09/01/navigation-on-css/\">реализовывал свою идею меню</a>, когда определенные пункты отображаются \"впереди\" всех остальных. Сейчас пришлось использовать идею повторно. Вот это меню в oldschool дизайне:
<a href=\"/examples/zindex/\"><img src=\"/images/zindex.gif\" alt=\"меню с пересекающимися пунктами\" /></a>
"
---

Больше чем два года назад(ужас) <a href="http://cssing.org.ua/2004/09/01/navigation-on-css/">реализовывал свою идею меню</a>, когда определенные пункты отображаются "впереди" всех остальных. Сейчас пришлось использовать идею повторно. Вот это меню в oldschool дизайне:
<a href="/examples/zindex/"><img src="/images/zindex.gif" alt="меню с пересекающимися пунктами" /></a>
<!--more-->

<h3>Идея</h3>
Идея тогда состояла в том, что бы впику <a href="http://superfluousbanter.org/archives/2004/05/navigation-matrix/">методам моих гуру</a>, у которых пересечение реализовывалось сложной логикой отрисовки картинок, сделать это при помощи простой отрисовки картинок, но с использоавнием свойства z-index, позволяющего как бы менять местами последовательность отображения блоков. То есть оставлять какой-то блок позади других. Свойcтво это по логике вещей как нельзя лучше подходит для данного случая, имхо.

Вобщем о том как CSS в очередной раз спас мне жизнь :) пошагово и пойдет дальше рассказ.
<h3>HTML</h3>
Очевидный список:
<ol class="code">
<li>&lt;ul id=&quot;nav&quot;&gt;</li>
	<li class="tab">&lt;li&gt;&lt;a id="n1" ...&gt;Вакансии&lt;/a&gt;&lt;/li&gt;</li>
	<li class="tab">&lt;li&gt;&lt;a id="n2"...&gt;Резюме&lt;/a&gt;&lt;/li&gt;</li>
	<li class="tab">...</li>
	<li class="tab">&lt;li&gt;&lt;a id="n6" ...&gt;Советы&lt;/a&gt;&lt;/li&gt;</li>
<li>&lt;/ul&gt;</li>
</ol>
Проще некуда. id нужны так как каждый элемент навигации мы заменяем на картинку, потому нам нужно их различать.
<h3>Картинка</h3>
Для меню я буду использовать вот такую картинку:
<div style="overflow:auto;width:423px;height:80px;">
<img src="/images/nav.gif" alt="картинка использовавшася для меню" />
</div>
Как видно - в ней хранятся все пункты меню, вдобавок они же - но в положении "здесь" и :hover.(синие). Так же в отличие от техники которая меня вдохновила два года назад - картинки не пересекаются между собой - что заметно упрощает их отрисовку, в отличие от <a href="http://superfluousbanter.org/archives/2004/05/navigation-matrix-reloaded/">этого варианта</a>.

Все меню будет сделано лишь с использованием одной картинки - что позволит нам избежать всевозможных проблем с недозагрузкой некоторых пунктов меню.
<h3>CSS</h3>
Ну а теперь начинается самое интересное. z-index работает в ИЕ только для абсолютно позиционируемых элементов - это накладывает некоторые лишние правила на технику - которые я считаю ее основным недостатком. Но начнем с элементарных правил:
<ol class="code">
<li>#nav a{</li>
<li class="tab">display:block;</li>
<li class="tab">width:159px;<small>/*почти все пункты одинаковые у меня - но для двух я задаю отдельную ширину*/</small></li>
<li class="tab">height:25px;</li>
<li class="tab">background:transparent url(nav.gif) no-repeat 0 0;</li>
<li class="tab">position:absolute;</li>
<li class="tab">z-index:45</li>
<li>}</li>
</ol>
(я опустил <a href="http://cssing.org.ua/2006/02/23/image-replacement/">технику замены текста внутри ссылок</a> на картинки, для простоты)

Координаты каждого пункта(мы вынуждены их задавать, так как я хочу использовать z-index, а значит пункты должны быть с position:absolute), так что бы они пересекались так, как нам кажется красивым:
<ol class="code">
<li>#n1{left:0}</li>
<li>...</li>
<li>#n5{left:533px}</li>
<li>#n6{left:680px;}</li>
</ol>
Пункты навигации теперь расположены где надо, дело за фоновыми картинками...

Выше для каждого пункта (#nav a) мы уже указали фоновую картинку nav.gif, все что нужно теперь - указать координаты ее сдвига для каждого пункта меню, тут понадобятся рассчеты:
<ol class="code">
<li>a#n1{background-position:0 0}</li>
<li>a#n1:hover, .a1 a#n1{background-position: 0 -25px}</li>
<li><strong>a#n2</strong>{background-position:-159px 0}<small>/*фон для 2го пункта положения "покоя"*/</small></li>
<li><strong>a#n2:hover, .a2 a#n2</strong>{background-position:-159px -25px}<small>/*фон для 2го пункта положения "здесь" и "hover"*/</small></li>
<li>...</li>
<li>a#n6{background-position:-772px 0}</li>
<li>a#n6:hover, .a6 a#n6{background-position:-772px -25px}</li>
</ol>
a#n6 - собственно фон для 6го пункта навигации, для этого как видно надо сдвинуть наш фон на 772 пиксела влево.
a#n6:hover и .a6 a#n6  - положение фоновой картинки при наведенной мыши, и в положении "здесь".

z-index для положения при наведенной мыши:
<ol class="code">
<li>#nav a:hover{z-index:50}</li>
</ol>
Я задаю z-index:50(>45) что бы при наведении мыши пункты отображались поверх соседних - как бы всплывали из-за них.
CSS для сигнализации "я здесь":
<ol class="code">
<li>.a1 #n1, .a2 #n2, .a3 #n3, .a4 #n4, .a5 #n5, .a6 #n6{z-index:55}</li>
</ol>
Теперь нам достаточно менять класс для UL на a1,..,a6 и при этом будут подсвечиваться соответствующие пункты навигации, более того, так как z-index мы им задаем 55, то есть больше чем 50 и 45, то они будут отображаться еще и перед соседними пунктами(и даже перед соседними наведенными пунктами). Что и приносит собсно тот эффект ради которого это все и придумывалось.
Полюбуйтесь <a href="/examples/zindex">этим меню в действии </a>

Картинки конечно не ахти ) но это то с чем мне пришлось работать, к сожалению. Мечтаю уже два года отрисовать для этой идеи stunning картинки.) Жаль я не <a href="http://www.nundroo.com/">Дидье</a>. 

<h3>В конце</h3>
<ul>
<li><a href="/examples/zindex">Пример меню</a> и <a href="/examples/coolzindex">чуть более навороченное</a></li>
<li><a href="http://cssing.org.ua/examples/c3/">Пример моего с той же идеей двухлетней давности</a></li>
<li><a href="http://cssing.org.ua/2004/09/01/navigation-on-css/">"Навигация по-русски"</a> -  мой пост двухлетней давности про эту идею</li>
</ul>
Ничего особо сложного в меню нет, но опять же, идея мне нравится, вдруг кому еще и пригодится.
Если вы скажете что я извращенец что такое делал ) то не ошибётесь. Но другого способа сделать меню с пересекающимися пунктами я не знаю.(не считая отрисовки сложных картинок). Если у Вас есть идеи по этому поводу <strong>буду рад услышать</strong>! 

Вообще такие сложности с position:absolute мне были нужны только для поддержки ИЕ5.0 5.5, если их поддержка вам не нужна, можно легко обойтись комбинацией margin-left:-10px;position:relative  c соответствующими изменениями z-index для подсвеченных пунктов. Прямо как поступил <a href="http://beholder-eye.info">Александр Шабуневич</a> в <a href="http://beholder-eye.info/2006/11/13/phpmyadmin-new-theme">своей красивой теме для PMA</a>.
