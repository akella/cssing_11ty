---
title: "Графики"
date: "2006-03-07"
humanDate: "07 Mar, 2006"
permalink: "2006/03/07/css-bar-graphs/"
tags: 
  - "xhtmlcss"
  - "useful"
comments: 
  -  author: "akella"
     id: "2879"
     url: "http://cssing.org.ua"
     date: "2006-03-09 19:16:53"
     humandate: "09 Mar, 2006"
     content: | 
       Спасибо Дэн :). И Spr!tE - очень интересный линк - вот уж действительно терь есть чем пострадать в свободное время. :)
       Читательницы(ца) пжлст ;)

     email: "akella.a@gmail.com"

  -  author: "Vladson"
     id: "2880"
     url: "http://dkflbk.nm.ru/"
     date: "2006-03-09 20:23:38"
     humandate: "09 Mar, 2006"
     content: | 
       Горизонтальные (как на diac.com.ua) я тоже как-то делал, даже хотел написать заметку на хомячёк http://dkflbk.nm.ru/test001/html001.html но увы лень сделала своё дело и дальше планирования это не дошло...

     email: "dkflbk@nm.ru"

  -  author: "Zmey"
     id: "2882"
     url: ""
     date: "2006-03-11 18:35:24"
     humandate: "11 Mar, 2006"
     content: | 
       <del>Юрка</del> Юрий Викторович(прим. akella :)), цветовую гамму ты как то неважно подобрал. попробуй поменять. А о технологии ничего не говорю - даже рядом с тобой не стою: )

     email: "kayl.datch@gmail.com"

  -  author: "DenD"
     id: "2875"
     url: "http://weblog.netlux.org"
     date: "2006-03-07 17:07:11"
     humandate: "07 Mar, 2006"
     content: | 
       Около года назад, помнится, делал гистограмы для http://diac.com.ua (на главной справа)
       
       Вариант с php+GD тогда почему-то сразу отпал, пришлось возится с html+CSS. А т.к. с CSS тогда был знаком очень слабо, возится пришлось основательно. Основная проблема была в том, чтобы подпись колонки съезжала вправо за границу 100% при достижении колонкой этих самых 100%. Задача мне казалась невыполнимой, а потом как-то все-таки победил :)

     email: "barushev@gmail.com"

  -  author: "ganges"
     id: "2876"
     url: ""
     date: "2006-03-07 21:05:23"
     humandate: "07 Mar, 2006"
     content: | 
       Респект. В следующий раз - давай вместе с PHP скриптом и конфигурацией :)

     email: "andrey.stefanenko@gmail.com"

  -  author: "Юля Ромашкина"
     id: "2877"
     url: "http://joyshua-xc.blogspot.com/"
     date: "2006-03-07 23:21:19"
     humandate: "07 Mar, 2006"
     content: | 
       Есть читательницы, есть :-) Спасибо :-)

     email: "shumacat@mail.ru"

  -  author: "Spr!tE"
     id: "2878"
     url: "http://eye.loveline.ru"
     date: "2006-03-09 17:15:21"
     humandate: "09 Mar, 2006"
     content: | 
       http://www.surfare.net/~toolman/temp/diagram.html - чего только на одном CSS не делают люди =)

     email: "loonar@gmail.com"

  -  author: "Code - веб-дизайнер (Creative Design Studio)"
     id: "2904"
     url: "http://www.cdstudio.org/"
     date: "2006-03-22 18:16:53"
     humandate: "22 Mar, 2006"
     content: | 
       Слов нет! Просто круто... Чувствую слабость...

     email: "oleg@cdstudio.org"

  -  author: "zaARTix"
     id: "2910"
     url: "http://1ya.ru"
     date: "2006-03-24 22:44:08"
     humandate: "24 Mar, 2006"
     content: | 
       Да Вы, батенька, маньяк :)
       шучу, клева получилось, респект.
       Даже и не допускал мысли раньше, что при помощи css можно организовать графики.

     email: "zaartix@yandex.ru"

  -  author: "Setti"
     id: "2908"
     url: "http://www.setti.biz/"
     date: "2006-03-24 11:15:17"
     humandate: "24 Mar, 2006"
     content: | 
       PHP библиотеки рулят :-) Для других задачь, конечно, понимаю.. Но с помощью jpegpaph можно такое делать!! :-)

     email: "setti.biz@gmail.com"

  -  author: "Setti"
     id: "2909"
     url: "http://www.setti.biz/"
     date: "2006-03-24 11:15:33"
     humandate: "24 Mar, 2006"
     content: | 
       Абажаю графики! :-)

     email: "setti.biz@gmail.com"

  -  author: "Сонечко"
     id: "2914"
     url: "http://www.ukr.net"
     date: "2006-03-29 14:43:27"
     humandate: "29 Mar, 2006"
     content: | 
       :))))

     email: "natalim@ukr.net"

  -  author: "D@nil"
     id: "3101"
     url: "http://danillab.com.ru/"
     date: "2006-04-29 12:53:51"
     humandate: "29 Apr, 2006"
     content: | 
       Рульная статья, автору респект

     email: "ddd"

  -  author: "Егор Булычев"
     id: "3112"
     url: "http://bulychev.info/"
     date: "2006-05-01 23:08:35"
     humandate: "01 May, 2006"
     content: | 
       очень интересно. буду пробовать.

     email: "eggo@mail.ru"

  -  author: "akella"
     id: "4575"
     url: "http://cssing.org.ua"
     date: "2006-08-24 16:24:18"
     humandate: "24 Aug, 2006"
     content: | 
       Не стоит спешить с выводами - GDI графики хороши на поверхности, и для внутреннего использования - на деле же, когда тебе надо сделать график такой как хочет дизайнер - никуда от HTML не денешься. Я все графики делю на три - HTML(в этом посте), PHP(твой вариант) и <a href="http://www.maani.us/charts/index.php?menu=Gallery" rel="nofollow">Flash</a>. У всех свои преимущества и ниши. :) Не стоит ущемлять кого то.

     email: "akella.a@gmail.com"

  -  author: "egor egorrr"
     id: "4596"
     url: ""
     date: "2006-08-27 01:21:47"
     humandate: "27 Aug, 2006"
     content: | 
       мне очень нравится простота кода

     email: "cypr@ya.ru"

  -  author: "Zigzag"
     id: "4572"
     url: "http://lovata.com"
     date: "2006-08-24 13:22:00"
     humandate: "24 Aug, 2006"
     content: | 
       имхо, техника из серии, посмотрите на что способен CSS, применение не будет оправданным, GD2 никто не отменял. игра не стоит свеч (применения на практике), опять же имхо.

     email: "zigzag85@mail.ru"

  -  author: "akella"
     id: "5857"
     url: "http://cssing.org.ua"
     date: "2006-10-16 09:15:33"
     humandate: "16 Oct, 2006"
     content: | 
       Ну во первых - на моем портале такие данные берутся сугубо из базы данных - не умею я складировать голоса сразу в вордовский документ. Собственно для этих нужд я их и придумал - не с потолка ж я их взял ). Да и видно по ХТМЛ коду что они так построены что бы было удобно их генерировать через ПХП или что угодно цикле. Так что аргумент про ворд для меня честно говоря удивителен и неактуален )
       
       Не вижу никакого разреза с идеологией. А вот ты как раз путаешь роль ЦСС в отображении. Пользователь увидит просто данные которые структурированы с помощью HTML. 
       Или когда без ЦСС вместо трех колонок сайта ты видишь одну это тоже неправильно? ) Ибо ЦСС структурирует страницу? Эдак таблицами надо верстать и ваапще без использования ЦСС.
       
       Вдобавок, конечно идеология это хорошо, и я люблю делать все идеально - но не стоит напрягать себя мегаусилиями если ты точно знаешь что они повлияют на этот мир меньше чем взмах крыльев бабочки.
       
       Я же написал, в посте, что добавление пустых спанов с датами сделает этот код идеально читабельным для юзеров без стилей - но я не добавил туда этих спанов из-за экономии кода и неоправданности моих усилий судя по статистике. Ну не будут эту страницу смотреть на КПК, к сожалению.

     email: "akella.a@gmail.com"

  -  author: "rybnadzorro"
     id: "5852"
     url: ""
     date: "2006-10-16 07:55:20"
     humandate: "16 Oct, 2006"
     content: | 
       ИМХО, данный вариант очень хорош только как наглядное пособие возможностей CSS. На деле очень часто подобные графики копируются и вставляются в вордовские документы, просто складируются для писания какой-то аналитики и т.д. Данный способ практически сводит на нет большинство вариантов репродукции :)
       
       + Идёт в разрез с идеологией безстабличной цсс-ной вёрстки, ибо ЦСС берёт на себя функции по структурированию, когда должен отвечать только за внешний вид. Без конкретного ЦСС файла пользователь не увидит диаграммы, а это не есть хорошо.

     email: "kazya@ua.fm"

layout: "layouts/post.njk"
excerpt: "Недавно пришлось делать графики для процентных соотношений политических партий. Вышли довольно забавные варианты - делюсь.

Наверно все же и у меня есть <strong>читательницы</strong>. Всех их поздравляю с наступающим!!! :)"
---

Недавно пришлось делать графики для процентных соотношений политических партий. Вышли довольно забавные варианты - делюсь.

Наверно все же и у меня есть <strong>читательницы</strong>. Всех их поздравляю с наступающим!!! :)<!--more-->
<h3>Что именно</h3>
<a href="http://cssing.org.ua/examples/graphs/">Тут можно посмотреть пример</a>. Как говорится это не rocket science. Тут все просто и вряд ли применяется какой то авангард. Но меня привлекает такой вид графиков и то как они просто получились - авось кому сгодится. Вот скрин для тех кто поленился кляцать:
<img class="center" src="http://cssing.org.ua/examples/graphs/graph.gif" alt="мои графики" />
Делал я их именно так - с помощью HTML-кода, а не ПХП библиотек или флеш штучек потому что так было проще :). А я никогда не ищу сложных путей. (почти)
<h3>HTML</h3>
Разумеется в основу всего этого я положил более или менее семантический с моей точки зрения код:
<ol class="code">
<li>&lt;div class=&quot;b-graph&quot;&gt;</li>
<li><small>&lt;!-- классы e1-e12 нужны для позиций колонок --&gt;</small></li>
<li class="tab">&lt;ul <strong>class=&quot;e1&quot;&gt;</strong></li>
<li class="tab">&lt;/ul&gt;</li>
<li class="tab">&lt;ul class=&quot;e2&quot;&gt;</li>
<li class="tab">...</li>
<li class="tab">&lt;/ul&gt;</li>
<li class="tab">&lt;ul class=&quot;e12&quot;&gt;</li>
<li class="tab">&lt;/ul&gt;</li>
<li>&lt;/div&gt;</li>
</ol>
Где каждый ul есть как раз та разноцветаня колонка из первого графика в примере. Как легко догадаться каждый из элементов списка является "прослойкой" цвета в колонках. Внутри списков примерно такой код:
<ol class="code">
<li>&lt;li <strong>class=&quot;c1&quot;</strong> style=&quot;height: 14px;&quot;&gt;</li>
<li class="tab">&lt;span&gt;</li>
<li class="tabtab">&lt;span class=&quot;hide&quot;&gt;Название партии&lt;/span&gt;14%</li>
<li class="tab">&lt;/span&gt;</li>
<li>&lt;/li&gt;</li>
<li>&lt;li <strong>class=&quot;c2&quot;</strong> style=&quot;height: 19px;&quot;&gt;&lt;span&gt;&lt;span class=&quot;hide&quot;&gt;Название партии&lt;/span&gt;19%&lt;/span&gt;&lt;/li&gt;</li>
</ol>
Номер каждого класса c1 c2 ... с6 отвечает просто за цвет прослойки. Так как в каждой колонке они в одном порядке - нет ничего проще как в PHPшном цикле его расставлять.

Название партии я скрывал через CSS, а позднее и вообще решил убрать из кода  - разумеется это <strong>не совсем правильно</strong>. Но по статистике там не было слепых пользователей и мобильных :(. Да и SEO была неактуальна в контексте проекта.

Вместо этого я добавил центрирование по вертикали. Как вы возможно уже знаете, при указании одинаковой height и line-height - одна строка текста внутри блока центрируется по вертикали (<a href="http://cssing.org.ua/2005/07/14/vertical-align-middle/">уже писал</a>) А у нас как раз одна строка с процентами. :) Вот и хорошо.

<ol class="code">
<li>&lt;li class=&quot;c1&quot; style=&quot;height: 14px;&quot;&gt;</li>
<li class="tab">&lt;span <strong>style=&quot;height: 14px; line-height: 14px;&quot;</strong>&gt;</li>
<li class="tabtab">14%</li>
<li class="tab">&lt;/span&gt;</li>
<li>&lt;/li&gt;</li>
<li>&lt;li class=&quot;c2&quot; style=&quot;height: 19px;&quot;&gt;&lt;span <strong>style=&quot;height: 19px; line-height: 19px;&quot;</strong>&gt;19&lt;/span&gt;&lt;/li&gt;</li>
</ol>
И так как за некоторые партии голосовало слишком мало народу - так что цифры попросту не влезали в эту прослойку - я расставлял через движок класс  class="view" для тех у кого достаточно места для показа процентов, примерно так:
<ol class="code">
<li>&lt;li class=&quot;c1&quot; style=&quot;height: 14px;&quot;&gt;</li>
<li class="tab">&lt;span <strong>class=&quot;view&quot;</strong> style=&quot;height: 14px; line-height: 14px;&quot;&gt;</li>
<li class="tabtab">14%</li>
<li class="tab">&lt;/span&gt;</li>
<li>&lt;/li&gt;</li>
</ol>


В результате при отключенных стилях мы бы имели что то вроде десятка списков с названиями партий и их процентами. Для полной доступности стоило конечно добавить туда еще и дату - так как каждая колонка соответствовала дате. Но по некоторым причинам(для тех кто не понял это лень и нехватка времени :)) пришлось ограничиться картинкой которую мне любезно предоставил ПМ. На ней уже были даты.

Вобщем и целом я думаю маркап довольно хороший, как для такой сложно структурированной инфы. С мобилы читается на ура.
<h3>CSS</h3>
Подготовил поле:
<ol class="code">
<li>.b-graph {</li>
<li class="tab">width:532px;</li>
<li class="tab">height:297px;</li>
<li class="tab">background:transparent url(b-graph.gif) no-repeat 0 0;</li>
<li class="tab">position:relative;<small>/* для позиционирования колонок внутри*/</small></li>
<li>}</li>
</ol>
Затем стили для колонок и цвета для полосочек
<ol class="code">
<li>.b-graph ul{</li>
<li class="tab">position:absolute;</li>
<li class="tab">bottom:18px;<small>/* что бы низ колонок совпал с рисунком графика*/</small></li>
<li class="tab">width:30px;<small>/* собссно ширина*/</small></li>
<li>}</li>
<li>с<strong>i</strong>{background:#<strong>xxx</strong>} <small>/* у меня 6 раз*/</small></li>
</ol>
И наконец самое слабое место метода как по мне - позиционирование каждой колонки - так как страница с ограниченной шириной, то в моем случае их кол-во было не очень большим - поэтому я и использовал 13 разных классов для их позиционирования:
<ol class="code">
<li>.e1{left:37px;}</li>
<li>.e2{left:72px;}</li>
<li>...</li>
<li>.e13{left:457px;}</li>
</ol>
Таким образом я их разместил через одинаковое расстояние, точно подгадав под фоновую картинку для графика. 
Однако это и есть главный недостаток - так как писать такой код довольно неудобно - да и приходится при увеличении колонок его дописывать. Возможно сделаю более универсальную версию...

<a href="http://cssing.org.ua/examples/graphs/">Вот что получилось</a>. 

К сожалению проблему whitespace между элементами списка в ИЕ 5.0 мне так и не удалось решить. Но ввиду его малого кол-ва, я про него "забыл". Вообще же можно было отдавать отдельный CSS. Либо использовать какой то немного другой код. Хотя я еще не оставил надежды побороть таки глюк каким нить хаком :)

В остальных же всех броузерах  работает отлично :)

Вот такие наскоро склепанные графики получились. Те что ниже и выглядят попроще построены по абсолютно такому же принципу - просто на одно измерение меньше.
Буду рад если кому то пригодится. Нет предела фантазии поиграться с фоном колонок :). Жаль есть предел времени. Но как по мне получилось довольно занятно, я таких графиков у наших "гуру" еще не видел :P.

<strong>Ваши предложения и замечания, комментарии приветствуются!</strong>
<h3>Ссылки</h3>
Еще про это писали:
<ul>
<li><a href="http://cssing.org.ua/examples/graphs/">Мои графики</a></li>
<li><a href="http://meyerweb.com/eric/thoughts/2005/12/20/bar-graphs-with-style">Bar Graphs With Style</a></li>
<li><a href="http://www.splintered.co.uk/experiments/57/">CSS bar graphs</a> и <a href="http://www.splintered.co.uk/experiments/archives/css_bar_graphs/">ссылка на пример</a></li>
<li><a href="http://apples-to-oranges.com/blog/article.aspx?id=55">CSS For Bar Graph</a></li>
<li><a href="http://www.terrill.ca/design/vertical_bar_graphs/">Похожая идея графиков</a> с отличной графической реализацией</li>
</ul>
принципы в основном похожие. Так что использовать нужно то, что удобно в данной ситуации. Ничего особо универсального нет.
